## 리덕스 기반 애플리케이션 작업 순서
- 리덕스 라이브러리 임포트
- 전체 고유 데이터 정의
- 상태관리 함수 정의 : 리듀서 정의
- 스토어 생성
- 스토어 적용 범위 정의


## 리덕스 라이브러리 설치
npm i react-redux
npm i @reduxjs/toolkit

**<Redux의 동작 과정>**

  1️⃣ **컴포넌트에서 이벤트 발생** 
→ 2️⃣ **Action 객체 생성** 
→ 3️⃣ **dispatch()로 Action 전달** 
→ 4️⃣ **slice(Reducer)가 상태 변경** 
→ 5️⃣ **Store 업데이트 후 UI 렌더링**

Action을 처리하는 객체는 일반 함수로 ~API.js 형태로 생성  --> slice(Reducer) 호출
ex) 
ProductDetail의 쇼핑백 추가 이벤트(액션 발생):dispatch 호출 --> cartAPI.js : addCart 호출
cartAPI.js의 addCart 함수에서 dispatch 받아서 --> dispatch로 cartSlice.js의 addCartList, countIcrement 호출 


## 폴더 구조
src/
│── app/
│   ├── store.js        # Redux 스토어 설정
│── features/           # Redux 관련 기능별 구조
│   ├── auth/           # 인증(로그인) 기능 관련 Redux 모듈
│   │   ├── authSlice.js       # Redux Toolkit 슬라이스
│   │   ├── authAPI.js         # API 요청 파일 (필요 시)
│   │   ├── authSelectors.js   # Selector 함수 (선택 사항)
│   ├── cart/          # 장바구니 기능 관련 Redux 모듈
│   │   ├── cartSlice.js       # Redux Toolkit 슬라이스
│   │   ├── cartAPI.js         # API 요청 파일 (필요 시)
│   │   ├── cartSelectors.js   # Selector 함수 (선택 사항)
│── components/         # 재사용 가능한 UI 컴포넌트
│── pages/              # 라우트 단위의 페이지 컴포넌트
│── hooks/              # 커스텀 훅 (예: useSelector, useDispatch 활용)
│── services/           # API 정의
│   ├── api.js          # 중앙 API 설정
│   ├── authAPI.js      # 인증 관련 API
│   ├── cartAPI.js      # 장바구니 관련 API
│── utils/             # 유틸리티 함수 모음



## 전역 스토어(store) 생성 및 연결

1️⃣ 스토어 생성 : src/app/store.js

```
import { configureStore } from '@reduxjs/toolkit'
import authSlice from '../features/auth/authSlice.js'
import cartSlice from '../features/cart/cartSlice.js'

// ✅ localStorage에서 상태 불러오기 - 새로고침 시 로컬스토리지에 저장된 Redux의 복제 환경을 로드함
<!-- const loadState = () => {
    try {
        const serializedState = localStorage.getItem("reduxState");
        return serializedState ? JSON.parse(serializedState) : undefined;
    } catch (error) {
        console.error("Redux 상태 로드 실패:", error);
        return undefined;
    }
}; -->

export const store = configureStore({
    reducer: {
        login : authSlice,
        cart : cartSlice
    },
    preloadedState: loadState(),
})

// ✅ 상태 변경 시 localStorage에 저장 - 새로고침(F5)의 경우 Redux 메모리 초기화 발생
// Redux의 state 환경을 그대로 복제해서 로컬스토리지에 저장함
store.subscribe(() => {
    try {
        const serializedState = JSON.stringify(store.getState());
        localStorage.setItem("reduxState", serializedState);
    } catch (error) {
        console.error("Redux 상태 저장 실패:", error);
    }
});
